MCPATH = $(abspath ../../compressor-install)
ZSTDPATH = $(abspath ../../compressor-install)
ZCPATH = $(abspath ../../Z-checker/zc-install)


MCFLAG = -fPIC -I$(MCPATH)/include/mc -L$(MCPATH)/lib -lsz_cpp -Wl,-rpath=$(MCPATH)/lib
ZSTDFLAG  = -I$(ZSTDPATH)/include -L$(ZSTDPATH)/lib -lzstd -lm -Wl,--disable-new-dtags,-rpath,$(ZSTDPATH)/lib
ZCFLAG  = -I$(ZCPATH)/include -L$(ZCPATH)/lib -lzc -lm -Wl,--disable-new-dtags,-rpath,$(ZCPATH)/lib


CC=g++
MC_FLOAT = mcfloat_CompDecomp
MC_DOUBLE = mcdouble_CompDecomp

all: $(MC_FLOAT) $(MC_DOUBLE)

$(MC_FLOAT): mcfloat_CompDecomp.cpp
	$(CC) -g mcfloat_CompDecomp.cpp $(LIBPRESSIOFLAG) $(ZSTDFLAG) $(MCFLAG) $(ZCFLAG) -lm -o $(MC_FLOAT)

$(MC_DOUBLE): mcdouble_CompDecomp.cpp
	$(CC) -g mcdouble_CompDecomp.cpp $(LIBPRESSIOFLAG) $(ZSTDFLAG) $(MCFLAG) $(ZCFLAG) -lm -o $(MC_DOUBLE)